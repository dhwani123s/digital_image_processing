 clc;
clear all;
close all;
P=uint8(imread('rice.png'));
%P1=rgb2gray(P1);
[m,n]=size(P);
k1=imnoise(P,'salt & pepper');
m1,n1]=size(k1);
subplot(3,2,1);
imshow(k1);
title('Image of Salt and Pepper Noise');
k2=imnoise(P,'gaussian');
[m2,n2]=size(k2);
subplot(3,2,3);
imshow(k2);
title('Image of Gaussian Noise');
k3=imnoise(P,'speckle');
[m3,n3]=size(k3);
subplot(3,2,5);
imshow(k3);
title('Image of Speckle Noise');

% 3*3 mask
I1=uint8(medfilt2(k1,[3 3]));
subplot(3,2,2);
imshow(I1);
title('3x3 Median Filter');
mg3 = sum(sum(I1-k1).^2) / (m1*n1);
psnr_g_3= 10*log10(255*255/mg3);
I2=uint8(medfilt2(k2,[3 3]));
subplot(3,2,4);
imshow(I2);
title('3x3 Median Filter');
msp3 = sum(sum(I2-k2).^2) / (m2*n2);
psnr_sp_3= 10*log10(255*255/msp3);
I3=uint8(medfilt2(k3,[3 3]));
subplot(3,2,6);
imshow(I3);
title('3x3 Median  Filter');
ms3 = sum(sum(I3-k3).^2) / (m3*n3);
psnr_s_3= 10*log10(255*255/ms3);
% 5*5 mask
I1=uint8(medfilt2(k1,[5 5]));
subplot(3,2,2);
imshow(I1);
title('5x5 Median Filter');
mg5 = sum(sum(I1-k1).^2) / (m1*n1);
psnr_g_5= 10*log10(255*255/mg5);
I2=uint8(medfilt2(k2,[5 5]));
subplot(3,2,4);
imshow(I2);
title('5x5 Median Filter');
msp5 = sum(sum(I2-k2).^2) / (m2*n2);
psnr_sp_5= 10*log10(255*255/msp5);
I3=uint8(medfilt2(k3,[5 5]));
subplot(3,2,6);
imshow(I3);
title('5x5 Median  Filter');
[i,j]=size(I3);
ms5 = sum(sum(I3-j3).^2) / (m3*n3);
psnr_s_5= 10*log10(255*255/ms5);
% 7*7 mask
I1=uint8(medfilt2(k1,[7 7]));
subplot(3,2,2);
imshow(I1);
title('7x7 Median Filter');
mg7 = sum(sum(I1-k1).^2) /(m1*n1);
psnr_g_7= 10*log10(255*255/mg7);
I2=uint8(medfilt2(k2,[7 7]));
subplot(3,2,4);
imshow(I2);
title('7x7 Median Filter');
msp7 = sum(sum(I2-k2).^2) / (m2*n2);
psnr_sp_7= 10*log10(255*255/msp7);
I3=uint8(medfilt2(k3,[7 7]));
subplot(3,2,6);
imshow(I3);
title('7x7 Median Filter');
ms7 = sum(sum(I3-k3).^2) / (m3*n3);
psnr_s_7= 10*log10(255*255/ms7);